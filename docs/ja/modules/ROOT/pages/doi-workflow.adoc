= DOIワークフロー

IPT v2.2以降、データセットのDOIを管理するためにDataCiteアカウントを使用するようIPTを設定することができます。公開者は、データセットに新しいDOIを割り当てるか、IPTにデータセットの既存のDOIを管理させるかを選択することができます。この2つのワークフローの説明は以下の通りです。

== ワークフロー

=== データセットに新しいDOIを割り当てる

公開者は、科学的に重要な変更をデータセットに行うたびに、新しくDOIを割り当てるのが理想的です。これにより、メジャーバージョンが互いに区別され、一意に引用できるようになります。

データセットにDOIを割り当てるには、まずDOIを予約する必要があります。公開者は、必須メタデータが入力された後に、データセットのDOIを予約することができます。DOIを予約することで、データセットが正式にリリースされる前に原稿に含めることができるようになります。

DOIは、リソースが一般に公開されていれば、次回公開時に登録されます。その結果、メジャーバージョンアップが行われます。

予約したDOIは、登録されるまでは削除することが可能です。このワークフローを図式化すると、以下のようになります。

image::ipt2/v22/AssignNewDOI.png[]

=== データセットの既存のDOIをIPTに管理させる

データセットに既にDOIが付与されている場合、公開者はIPTに既存のDOIを管理させることができます。IPTはデータセットが（再）公開されるたびにDOIメタデータを自動的に更新するため、DOIメタデータの更新が容易になります。

_既存の「登録済み」DOIを使用するためには、DOIのターゲットURIがデータセットのホームページURIと一致し、データセットが一般にアクセス可能であることを確認する必要があります（既存のDOIは一般にアクセス可能なページに解決しなければならないため）。_

既存のDOIをデータセットに割り当てるには、公開者はDOIを引用識別子として（リソースメタデータに）設定する必要があります。必須メタデータが入力された後、公開者はDOIを予約することができます。しかし、既存のDOIが入力されているので、IPTは新規にDOIを設定する代わりに、それを再利用します。もちろん、IPTのDOI付与アカウントはこのDOIを管理する権利を持っている必要があり、そうでない場合はエラーメッセージが表示されます。

_既存のDOIを削除しようとすると、既存のDOIが予約のみであった場合は削除されますが、登録されていた場合、削除されません。_

DOIは、リソースが一般に公開されている場合、次回公開時に更新されます。このときメジャーバージョンが変更されます。

このワークフローを図にすると、以下のようになります。

image::ipt2/v22/AssignExistingDOI.png[]
